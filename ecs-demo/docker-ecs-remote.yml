x-aws-vpc: ${AWS_VPC}
x-aws-cluster: ${AWS_ECS_CLUSTER}
# x-aws-loadbalancer: "LoadBalancerName"

services:
  gateway:
    volumes:
      - gwconf:/conf
    entrypoint: ["/opt/tyk-gateway/tyk", "--conf", "/conf/${CONFIG}/tyk.conf"]

volumes:
  gwconf:
    external: true
    name: "fs-0076cece6b31c5f40"

# Use cloudformation Overlay to fix generated template
x-aws-cloudformation:
  Resources:
    LoadBalancer:
      Properties:
        Subnets:
        - subnet-00c0c7aa9caab1282
        - subnet-0a1b3465634506a53
        - subnet-030ca51a467743059

# networks:
#   private:
#     external: true
#     name: "sg-0b69c799431fe3c61"
#   public:
#     external: true
#     name: "sg-0c76f7ba8cb5478ee"